2012/5/25版
	行の折り返しが行われるパターンでlibfreetype_plugin.dllがクラッシュする不具合に対応しました。
2012/5/11版
	srt字幕などでlibfreetype_plugin.dllがクラッシュする不具合に対応しました。
	(libfreetype_plugin.dllのみ差し替え)
2012/4/24版
	drcs_conv.iniに変換登録されているハッシュは保存しないようにしました。
	arib字幕表示パッチの更新を取り込みました。(2012/4/22版)
	（README-ARIB.txtは4/24付）
	freetypeの描画位置を調整しました。
	文字幅が1/2のものを描画できるよう対応しました。(標準サイズで1/2のみ）
2012/3/22版
	http://git.videolan.org/gitweb.cgi/vlc/vlc-1.1.git/?a=commit;h=4780f904d02696bb0f2be14055fd89cba17a5b5e
	http://git.videolan.org/gitweb.cgi/vlc/vlc-1.1.git/?a=commit;h=265ec1f31c6429535dbd14bdc24e652b54e4ef25
	セキュリティパッチを取り込みました。
	libpng(1.5.9),libfreetype2(14.1.8)を更新しました。
2012/3/2版
	arib字幕パッチの最新更新(3/2)を取り込みました。
2012/2/26版 vlc1.1.13対応版
	arib字幕パッチの最新更新を取り込みました。

2012/2/22版 vlc1.1.13対応版
	字幕フォントサイズを変更し、ルビ位置の微調整を行いました。

2012/2/19版 vlc1.1.13対応版
	字幕パッチの取り込み不足があったので更新しました。

2012/2/18版 vlc1.1.13対応版

	vlc113.diff

	https://skydrive.live.com/?cid=2DAB0D8D07FA4EBF&id=2DAB0D8D07FA4EBF!117
	arib字幕表示パッチの取り込み
	http://git.videolan.org/?p=vlc.git;a=patch;h=cb5f74d6b3c9bbf35493ebc5d0b561bfaba9d7f1
	TS時間表示パッチの取り込み

	他いつもの2重音声とフォント不具合対応他が入ってます。
	字幕に関してはREADME-ARIB.txtを参照してください。



v 0.02:		2011-04-02
	faad.c内部でデコードエラーが発生した場合
	デコーダを再初期化する処理を追加。
	これによりステレオ->DualMono->ステレオとモードが変化
	するパターンで無音にならないことを確認。
	vlc-1.1.8で確認。

	以下はオリジナル作成者の方のReadMe
************************************************************
* VLC パッチ for デジタル放送 音声チャンネル構成切り替え対応
************************************************************

v 0.01:		2010-01-23 JST




概略
========================================================
生TSを取り出せるチューナー各種でデジタル放送を視聴・録画する
とき，音声(MPEG-2 AAC)のチャンネル構成が切り替わるタイミングで
再生・トランスコードを行うソフトウェアが落ちる現象が各所で
報告されており，鬼門となっています．

本パッチはVLC(video LAN client)を音声チャネル構成切り替えに
対応させるためのものです．

VLCは再生アプリケーションとして機能だけでなく，リアルタイムに
トランスコードを行いながらストリーミング送信も行えるのが
持ち味です．


なお，本パッチを適用なされる前に，この下に書いた既知の問題点，
および現状での制限事項をお読み下さい．


本パッチが，皆さんのLinuxデジタル放送ライフがより良くなるための
一助になれば幸いです．




既知の問題点
========================================================
・頻繁にチャンネル構成が変わる(ステレオ<->モノラル)と
  映像と音のズレが目で見て分かる(声と口の動きがズレる)
  程度まで酷くなる．




既知の制限事項
========================================================
・デュアルモノラルの場合，2chのペアのうちの一方が主音声，
  もう一方が副音声，として出力される．
  ↓
  再生アプリケーションの方で，左側だけのモノラル再生に
  切り替える，などして対処してほしい．




動作確認内容
========================================================
● 音声チャネル構成切り替え
  下記チャネル構成間の切り替え (総当たりではない)
  - ステレオ
	これが一番多い
  (- ステレオ バイリンガル : 不明)
	(2つのPIDにそれぞれステレオで日本語と外国語)
  - 5.1chサラウンド
	時々放送される．番組表に「5.1chサラウンド」と
	明記されることが多い．
  - モノラル
	NHK BS-1で定時放送される「BSニュース」など
  - デュアルモノラル
	二ヶ国語放送でこの構成が結構ある．
	NHK総合の「ニュース7」(月-金 19:00～),
	NHK BS-1の海外ニュース番組,など．

  NHK BS-1の海外ニュース番組では，モノラルとデュアルモノラルが
  番組中に何度も切り替わることがある．
  (海外からのニュース映像とスタジオ撮り部分との行き来)


● 機能
  - 再生
	NHK BS-1/BS-2の生TSキャプチャを使って，
	ステレオ，モノラル，デュアルモノラルについて．
  - トランスコード，ストリーム出力
	ステレオ，モノラル，デュアルモノラル，5.1ch をひと通り

  5.1chの再生は試してない．(再生するための機材がないので)




動作確認環境
========================================================
・kernel-2.6.31.11
・Fedora 12 / x86
・VLC gitソースコード 16cb266.....
・faad2-2.7




パッチ充て～ビルド
========================================================
  先にfaadのインストールを済ませておくこと．

  1) gitソースコード取得
	git clone git://git.videolan.org/vlc.git
  2) リビジョンを合わせる
	git checkout 16cb266
  3) パッチを充てる
	cd vlc
	patch -p1 < vlc_patch.txt
  4) ビルド
	./configure
	make
  5) インストール
	sudo make install




VLCを使う上でのtips
========================================================

サービス番号を指定して取り出す
---------------------------------------------------
  現状のNHK BS-1/BS-2は1つの周波数にSDサイズ映像で
  BS-1とBS-2の両方の放送が送信されているので，一方だけを
  取り出すために使う．
  また，地上デジタル放送でワンセグ放送部分を除いて本放送だけを
  取り出すのにも使う．

・1つだけ
  --program <サービスID>
  例) NHK BS-1を取り出す場合
      --program 101

・複数
  --programs <サービスIDをカンマ区切りで列挙>
  例) NHK BS-1/BS-2 を取り出す場合
      --programs 101,102


PIDを指定して取り出す (ストリーム出力時)
---------------------------------------------------
  NHK BS-1/BS-2では主放送の他に降雨対応として低解像度・低ビットレートの
  映像が同時に送信されてくる．
  その映像を取り除いた状態で出力させるために使う．

  ストリーム出力のサブコマンド"duplicate"のオプションで
  「select="es=xxx,es=yyy,es=zzz"」という書式で，
  取り出したいPIDを列挙しする．
  例) PID = 256,272 を取り出す場合 (NHK BS-1の映像とプライマリ音声)
  --sout '#duplicate{dst=std{access=file,dsts=/tmp/temp1.mpg},select="es=256,es=272"}'


TS出力時のPIDを固定する
---------------------------------------------------
  通常ステレオ <-> 5.1chサラウンド の構成切り替えを含むストリームを
  トランスコードに通す場合，そのままだと，通常ステレオと5.1chサラウンドが
  別々のPIDで出力されるようである．
  (詳細は調べていない)

  例えば，
     ---------|--------------------------------|-------
    2ch stereo           5.1ch surround         2ch stereo
    PID=69               PID=70                 PID=69
  ということ．

  この状態で録画したものを再生する場合，VLCはその時点で存在する
  オーディオのPIDを探してよきに計らってくれるが，例えば素のmplayerでは
  先に2ch stereoのオーディオPID=69を見つけてそれを再生し始めるが，
  5.1chサラウンドの区間ではPIDが異なるため音が鳴らない．

  このようにチャネル構成ごとに別々のPIDに分けて出力しないように
  固定させるオプションがある．
  音声: --sout-ts-pid-audio <PID>
  (映像: --sout-ts-pid-video <PID>)


ログ取り
---------------------------------------------------
  不具合の調査のときにログ取りを行える．
  特に，"-d"をつけてデーモン扱いでトランスコード・ストリーム出力を
  行う場合には標準出力を持たないので，ログファイルに書き出さないと
  何のエラーで不具合が出ているのか分からない．

  --extraintf logger --logfile <filename> [--verbose <0,1,2>]

  "--extraintf logger"を指定しないとログファイル出力機能は
  有効にならない．
  単に"--logfile <filename>"だけ付けてもログはファイルに
  書き出されない．

  "--verbose <0,1,2>" はログファイルそのものとは関係ないが
  ログに出力する冗長度を指定するものである．
  0: エラーのみ
  1: エラー，ワーニング
  2: エラー，ワーニング, デバッグ
  デフォルトは0になっている．


*********************************************** ここまで
